# ToastFish 随机抽背功能说明

## 📖 功能概述

随机抽背功能是 ToastFish 的全新特性，允许用户在指定的时间段内以随机时间间隔自动接收单词抽背通知。这个功能特别适合需要在工作或学习期间进行碎片化学习的用户。

## ✨ 主要特性

### 🎯 核心功能
- **随机时间间隔**: 在设定的最小和最大时间间隔内随机选择下次抽背时间
- **时间段控制**: 可设置每日的抽背活动时间段（如 9:00-17:00）
- **勿扰模式**: 支持设置勿扰时间段，避免在重要时间打扰
- **多语言支持**: 支持英语单词、日语单词和五十音的随机抽背
- **配置持久化**: 设置会自动保存，重启软件后保持配置

### 🛠️ 技术特性
- **低资源占用**: 使用高效的定时器机制，最小化系统资源消耗
- **线程安全**: 采用线程安全设计，确保稳定运行
- **异常处理**: 完善的错误处理机制，确保功能稳定性
- **实时状态**: 提供实时的运行状态和下次抽背时间显示

## 🚀 使用指南

### 1. 启用随机抽背功能

1. 右键点击系统托盘中的 ToastFish 图标
2. 选择 "参数设置" → "随机抽背设置"
3. 在设置窗口中勾选 "启用随机抽背功能"

### 2. 配置时间段

**抽背时间段设置**：
- **开始时间**: 每日开始抽背的时间（格式：HH:mm，如 09:00）
- **结束时间**: 每日结束抽背的时间（格式：HH:mm，如 17:00）
- 支持跨天设置（如 22:00 到次日 06:00）

**随机间隔设置**：
- **最小间隔**: 两次抽背之间的最短时间间隔（分钟）
- **最大间隔**: 两次抽背之间的最长时间间隔（分钟）
- 系统会在此范围内随机选择下次抽背时间

### 3. 勿扰模式配置

1. 勾选 "启用勿扰模式"
2. 设置勿扰开始和结束时间
3. 在勿扰时间段内，系统不会推送抽背通知

### 4. 状态监控

设置界面提供实时状态显示：
- **运行状态**: 显示当前调度器的运行状态
- **下次抽背**: 显示下次抽背的预计时间和倒计时
- **当前时间**: 显示当前系统时间

### 5. 手动控制

- **测试抽背**: 立即触发一次抽背，用于测试功能
- **启动/停止**: 手动控制随机抽背功能的启停

## ⚙️ 配置示例

### 工作日学习配置
```
启用随机抽背: ✓
抽背时间段: 09:00 - 18:00
随机间隔: 15-45 分钟
勿扰模式: ✓ (12:00-13:00 午休时间)
```

### 全天学习配置
```
启用随机抽背: ✓
抽背时间段: 08:00 - 22:00
随机间隔: 10-30 分钟
勿扰模式: ✗
```

### 夜猫子配置
```
启用随机抽背: ✓
抽背时间段: 22:00 - 06:00 (跨天)
随机间隔: 20-60 分钟
勿扰模式: ✗
```

## 🔧 技术说明

### 系统要求
- Windows 10 及以上版本
- .NET Framework 4.7.2 或更高版本
- 支持 Windows 通知系统

### 配置文件
- 配置文件位置: `RandomScheduleConfig.json`
- 格式: JSON
- 自动保存: 每次修改设置后自动保存

### 词库支持
- **英语词库**: CET4、CET6、TOEFL、IELTS、GRE、GMAT、考研等
- **日语词库**: 标准日本语中级词汇
- **五十音**: 平假名、片假名学习

## 🐛 故障排除

### 常见问题

**Q: 设置了随机抽背但没有收到通知？**
A: 请检查：
1. 是否启用了随机抽背功能
2. 当前时间是否在设置的抽背时间段内
3. 是否在勿扰时间段内
4. 是否选择了词库

**Q: 通知显示频率太高或太低？**
A: 调整随机间隔设置中的最小和最大间隔时间。

**Q: 跨天时间段设置不生效？**
A: 确保开始时间大于结束时间（如 22:00 > 06:00），系统会自动识别为跨天设置。

**Q: 配置丢失？**
A: 配置保存在 `RandomScheduleConfig.json` 文件中，请确保程序有写入权限。

### 调试信息
程序运行时会在调试输出中显示详细的日志信息，包括：
- 调度器启动/停止事件
- 下次抽背安排时间
- 抽背执行记录
- 错误信息

## 📝 更新日志

### v1.0.0 (当前版本)
- ✅ 实现基本的随机抽背功能
- ✅ 支持时间段和勿扰模式设置
- ✅ 添加配置持久化
- ✅ 优化性能和线程安全
- ✅ 完善用户界面和状态显示

### 计划功能
- 📋 抽背历史记录
- 📊 学习统计报告
- 🔔 自定义通知样式
- 📱 移动端同步

## 💡 使用建议

1. **合理设置间隔**: 建议最小间隔不少于 10 分钟，避免过于频繁的打扰
2. **利用勿扰模式**: 在重要会议或专注工作时启用勿扰模式
3. **选择合适词库**: 根据学习目标选择对应的词库
4. **定期调整**: 根据学习进度和习惯调整时间设置
5. **配合主动学习**: 随机抽背作为辅助，配合主动的学习计划效果更佳

---

**注意**: 随机抽背功能需要系统通知权限，请确保 ToastFish 的通知权限已开启。
